@using Academy.Resources
@model Academy.Presentation.ViewModels.AnswerViewModel

@{
    string postAsnwerFormId = String.Format("postAnswerForm{0}", Model.QuestionId);
    string answersId = String.Format("answersFor{0}", Model.QuestionId);
}

@using (Html.BeginForm("Answer", "Answer", FormMethod.Post, new { id = postAsnwerFormId }))
{
    Html.RenderPartial("EditorTemplates/CreateAnswerEditor", Model);
    <input type="submit" class="btn btn-primary pull-right" value="@Localization.GetString("answer")"/>
}

<script type="text/javascript">
    $('#@postAsnwerFormId').submit(function () {
        $.validator.unobtrusive.parse('#@postAsnwerFormId');
        if ($('#@postAsnwerFormId').valid()) {
            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (result) {
                    $('#@answersId').html(result);
                    $('#@postAsnwerFormId')[0].reset();
                }
            });
        }
        return false;
    });
</script>