@model Academy.Presentation.ViewModels.ArticleViewModel

@{
    const string formId = "publishArticle";
    var formSettings = new
        {
            id = "publishArticle",
            @class = "form-horizontal",
            style = "padding-bottom: 20px",
            enctype = "multipart/mixed"
        };
}

@using (Html.BeginForm("PublishArticle", "Article", FormMethod.Post, formSettings))
{
    @Html.ValidationSummary(true)
    @Html.EditorForModel("CreateArticleEditor")
}

<script type="text/javascript">
    $(function() {
        $('#@formId').submit(function () {
            $.validator.unobtrusive.parse('#@formId');
            if ($('#@formId').valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        $('#data').html(result);
                        $('#@formId').find(':input').each(function () {
                            $(this).val('');
                        });
                        CollapseDisciplinesTree();
                    }
                });
            }
            return false;
        });
    })
</script>
